(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2210:(e,t,l)=>{Promise.resolve().then(l.bind(l,1440))},1440:(e,t,l)=>{"use strict";l.d(t,{default:()=>r});var s=l(7437),a=l(2265);function r(){let[e,t]=(0,a.useState)("idle"),[l,r]=(0,a.useState)(0),[n,o]=(0,a.useState)(0),[d,c]=(0,a.useState)(10),[u,p]=(0,a.useState)(0),[m,x]=(0,a.useState)(0),[g,h]=(0,a.useState)(30),[b,v]=(0,a.useState)(30),y=(0,a.useRef)(!1),[f,j]=(0,a.useState)(!1),[N,S]=(0,a.useState)([{x:1,y:1}]),[w,k]=(0,a.useState)("RIGHT"),[L,C]=(0,a.useState)([{position:{x:2,y:2},type:"apple"}]),[E,A]=(0,a.useState)(0),[D,B]=(0,a.useState)(0),[V,T]=(0,a.useState)(null),[F,O]=(0,a.useState)(0),[P,G]=(0,a.useState)([]),[M,q]=(0,a.useState)(!1),[R,_]=(0,a.useState)(0),[I,U]=(0,a.useState)(0),[z,H]=(0,a.useState)({x:2,y:2}),[W,J]=(0,a.useState)(null),[K,Q]=(0,a.useState)(!1),[Z,X]=(0,a.useState)(!1),[Y,$]=(0,a.useState)(""),[ee,et]=(0,a.useState)(""),el=e=>{let t=Math.floor(e/2);return{width:4+t,height:4+t+e%2}},[es,ea]=(0,a.useState)(4),[er,ei]=(0,a.useState)(4),en=(0,a.useRef)("RIGHT"),eo=(0,a.useRef)([{x:1,y:1}]);(0,a.useEffect)(()=>{eo.current=N},[N]),(0,a.useEffect)(()=>{en.current=w},[w]);let[ed,ec]=(0,a.useState)("game"),[eu,ep]=(0,a.useState)(1),[em,ex]=(0,a.useState)(0),[eg,eh]=(0,a.useState)(0),[eb,ev]=(0,a.useState)(0),[ey,ef]=(0,a.useState)([]),[ej,eN]=(0,a.useState)([{id:"appleValue",name:"Valeur des Pommes",description:"Augmente la valeur de chaque pomme r\xe9colt\xe9e",baseCost:10,level:0,maxLevel:20,unlocked:!0,position:{x:1,y:1},effect:()=>{}},{id:"healthBonus",name:"Points de Vie",description:"Augmente les PV de d\xe9part du serpent",baseCost:10,level:0,maxLevel:20,unlocked:!0,position:{x:1,y:3},effect:()=>{}},{id:"timeBonus",name:"Bonus Temps",description:"+2 secondes par partie",baseCost:50,level:0,maxLevel:10,unlocked:!1,requiredLevel:"appleValue",requiredLevelValue:3,position:{x:-1,y:1},effect:()=>{}},{id:"gridSize",name:"Taille de la Grille",description:"Agrandit le terrain de jeu",baseCost:25,level:0,maxLevel:6,unlocked:!1,requiredLevel:"appleValue",requiredLevelValue:3,position:{x:3,y:1},effect:()=>{}},{id:"speedBonus",name:"Vitesse",description:"Augmente la vitesse du serpent de 5%",baseCost:100,level:0,maxLevel:15,unlocked:!1,requiredLevel:"healthBonus",requiredLevelValue:5,position:{x:1,y:5},effect:()=>{}},{id:"blueFruit",name:"Fruit Bleu",description:"Active le fruit bleu. Effets : +1 PV, +2s temps/partie, 0.5x points (vs pomme rouge)",baseCost:200,level:0,maxLevel:10,unlocked:!1,requiredLevel:"gridSize",requiredLevelValue:2,position:{x:3,y:3},effect:()=>{}},{id:"goldenApple",name:"Pomme d'Or",description:"1% de chance par niveau d'appara\xeetre (valeur 10x normale)",baseCost:500,level:0,maxLevel:100,unlocked:!1,requiredLevel:"gridSize",requiredLevelValue:4,position:{x:5,y:3},effect:()=>{}},{id:"bombSystem",name:"Syst\xe8me Bombe",description:"Place des bombes explosives. Apparaissent apr\xe8s 5s de jeu. Si touch\xe9es : -75% PV. Si elles explosent seules : bonus al\xe9atoire parmi :\n• +0.1% permanent points/pomme\n• Double score 30s\n• +1 PV permanent\n• +10s temps de jeu",baseCost:1e3,level:0,maxLevel:10,unlocked:!1,requiredLevel:"gridSize",requiredLevelValue:3,position:{x:5,y:5},effect:()=>{}}]);(0,a.useEffect)(()=>{(()=>{try{let e=localStorage.getItem("snakeGameState");if(e){let t=JSON.parse(e);t.upgrades&&eN(t.upgrades),t.gameState&&(r(t.gameState.totalPoints||0),x(t.gameState.highScore||0),ep(t.gameState.appleValue||1),p(t.gameState.healthBonus||0),ex(t.gameState.timeBonus||0),eh(t.gameState.speedBonus||0),ev(t.gameState.blueFruitBonus||0),Q(t.gameState.isBlueFruitActive||!1),A(t.gameState.goldenAppleLevel||0),B(t.gameState.bombSystemLevel||0),_(t.gameState.permanentPointsBonus||0),ea(t.gameState.gridWidth||4),ei(t.gameState.gridHeight||4),U(t.gameState.goldenAppleMultiplier||0))}}catch(e){console.error("Erreur lors du chargement de l'\xe9tat du jeu:",e)}})(),j(!0);let e=eT([{x:1,y:1}])||{x:2,y:2};C([{position:e,type:"apple"}]),H(e)},[]);let eS=(0,a.useCallback)(()=>{try{let e={upgrades:ej,gameState:{totalPoints:l,highScore:m,appleValue:eu,healthBonus:u,timeBonus:em,speedBonus:eg,blueFruitBonus:eb,isBlueFruitActive:K,goldenAppleLevel:E,bombSystemLevel:D,permanentPointsBonus:R,gridWidth:es,gridHeight:er,goldenAppleMultiplier:I},timestamp:new Date().toISOString()};localStorage.setItem("snakeGameState",JSON.stringify(e))}catch(e){console.error("Erreur lors de la sauvegarde de l'\xe9tat du jeu:",e)}},[ej,l,m,eu,u,em,eg,eb,K,E,D,R,es,er,I]);(0,a.useEffect)(()=>{if(!f)return;let e=setTimeout(()=>{eS()},500);return()=>clearTimeout(e)},[l,ej,m,eu,u,em,eg,eb,K,E,D,R,es,er,I,f]);let ew=(0,a.useCallback)(e=>e.map(t=>{if(!t.unlocked&&t.requiredLevel&&t.requiredLevelValue){let l=e.find(e=>e.id===t.requiredLevel);if(l&&l.level>=t.requiredLevelValue)return{...t,unlocked:!0}}return t}),[]),ek=(0,a.useCallback)((e,t)=>Math.floor(e*Math.pow(1.5,t)),[]),eL=(0,a.useCallback)(s=>{eN(a=>{let r=a.find(e=>e.id===s);return!r||r.level>=r.maxLevel||!r.unlocked||l<ek(r.baseCost,r.level)?a:ew(a.map(l=>{if(l.id===s){let a=l.level+1;if("appleValue"===s)ep(1+a);else if("healthBonus"===s)p(a);else if("gridSize"===s){let l=el(a);ea(l.width),ei(l.height),"playing"===e&&(t("idle"),ec("game"))}else"timeBonus"===s?ex(2*a):"speedBonus"===s?eh(5*a):"blueFruit"===s?(ev(1*a),Q(!0)):"goldenApple"===s?A(a):"bombSystem"===s&&B(a);return{...l,level:a}}return l}))});let a=ej.find(e=>e.id===s);if(a){let e=ek(a.baseCost,a.level);r(t=>Math.max(0,t-e))}},[l,ek,e,ew]),eC=(0,a.useCallback)(()=>{if("undefined"==typeof document)return;let e=ej.map(e=>({id:e.id,name:e.name,description:e.description,baseCost:e.baseCost,level:e.level,maxLevel:e.maxLevel,unlocked:e.unlocked,requiredLevel:e.requiredLevel,requiredLevelValue:e.requiredLevelValue,position:e.position,effect:()=>{}}));ef(e);let t=JSON.stringify({savedUpgrades:e,gameState:{appleValue:eu,healthBonus:u,timeBonus:em,speedBonus:eg,blueFruitBonus:eb,isBlueFruitActive:K,gridWidth:es,gridHeight:er,totalPoints:l,highScore:m},timestamp:new Date().toISOString()},null,2);try{let e=new Blob([t],{type:"application/json"}),l=URL.createObjectURL(e),s=document.createElement("a");s.href=l,s.download="snake_idle_upgrades_".concat(Date.now(),".json"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(l)}catch(e){console.error("Erreur lors du t\xe9l\xe9chargement du fichier:",e),alert("Erreur lors du t\xe9l\xe9chargement du fichier de sauvegarde")}},[ej,eu,em,es,er,l,m]),eE=(0,a.useCallback)(e=>{var t;let l=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!l)return;let s=new FileReader;s.onload=e=>{try{var t;let l=JSON.parse(null===(t=e.target)||void 0===t?void 0:t.result);l.savedUpgrades&&Array.isArray(l.savedUpgrades)&&(ef(l.savedUpgrades),l.gameState&&(ep(l.gameState.appleValue||1),p(l.gameState.healthBonus||0),ex(l.gameState.timeBonus||0),eh(l.gameState.speedBonus||0),ev(l.gameState.blueFruitBonus||0),Q(l.gameState.isBlueFruitActive||!1),ea(l.gameState.gridWidth||4),ei(l.gameState.gridHeight||4),x(l.gameState.highScore||0)))}catch(e){console.error("Erreur lors du chargement des am\xe9liorations:",e),alert("Erreur: Le fichier de sauvegarde est invalide")}},s.readAsText(l)},[]),eA=(0,a.useCallback)(()=>{if(0===ey.length){alert("Aucune am\xe9lioration sauvegard\xe9e \xe0 appliquer");return}ep(1),p(0),ex(0),eh(0),ev(0),Q(!1),ea(4),ei(4),eN(ej.map(e=>{let t=ey.find(t=>t.id===e.id);if(t){let l=t.level-e.level;if("appleValue"===e.id)ep(e=>e+l);else if("healthBonus"===e.id)p(e=>e+l);else if("timeBonus"===e.id)ex(e=>e+2*t.level);else if("speedBonus"===e.id)eh(5*t.level);else if("blueFruit"===e.id)ev(1*t.level),Q(!0);else if("gridSize"===e.id){let e=el(t.level);ea(e.width),ei(e.height)}return t}return e})),ef([]),alert("Am\xe9liorations appliqu\xe9es avec succ\xe8s!")},[ey,ej]),eD=(0,a.useCallback)(()=>{Z?(X(!1),$("")):"dev"===Y?(X(!0),alert("Mode d\xe9veloppeur activ\xe9 !")):alert("Mot de passe incorrect !")},[Z,Y]),eB=(0,a.useCallback)(()=>{let e=parseInt(ee);!isNaN(e)&&e>0?(r(t=>t+e),et(""),alert("".concat(e," points ajout\xe9s !"))):alert("Veuillez entrer un nombre valide !")},[ee]),eV=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=[];for(let s=0;s<es;s++)for(let a=0;a<er;a++){let r=e.some(e=>e.x===s&&e.y===a),i=t.some(e=>e.x===s&&e.y===a);r||i||l.push({x:s,y:a})}if(0===l.length)return null;let s=Math.floor(Math.random()*l.length);return l[s]},[es,er]),eT=(0,a.useCallback)(e=>eV(e),[eV]),eF=(0,a.useCallback)(e=>{let t=[],l=[],s=0,a=(e,t)=>++s>100?null:eV(e,t),r=a(e,l);if(r&&(t.push({position:r,type:"apple"}),l.push(r)),E>0&&s<100&&Math.random()<.01*E){let s=a(e,l);s&&(t.push({position:s,type:"goldenApple"}),l.push(s))}if(K&&s<100){let s=a(e,l);s&&(t.push({position:s,type:"blueFruit"}),l.push(s))}return t},[E,K,eV]),eO=(0,a.useCallback)((e,t,l)=>{let s=eV([],[...e,...t.map(e=>e.position)]);return s?{position:s,type:l}:null},[eV]),eP=(0,a.useCallback)((e,t)=>K?eV(e,[t]):null,[K,eV]),eG=(0,a.useCallback)((e,t)=>{if(0===D||F<5||Math.random()>Math.min(.3,.05*D))return null;let l=eV([],[...e,...t.map(e=>e.position)]);if(!l)return null;let s=Math.max(5,15-D);return{position:l,timer:s,maxTimer:s,state:"active"}},[D,F,eV]),eM=(0,a.useCallback)(()=>{let e=[{type:"permanentPoints",value:.1,permanent:!0},{type:"doubleScore",value:1,duration:30},{type:"extraHealth",value:1,permanent:!0},{type:"extraTime",value:10}],t=e[Math.floor(Math.random()*e.length)];switch(t.type){case"permanentPoints":_(e=>e+t.value);break;case"doubleScore":q(!0),G(e=>[...e,t]),setTimeout(()=>{q(!1),G(e=>e.filter(e=>"doubleScore"!==e.type))},1e3*t.duration);break;case"extraHealth":c(e=>e+t.value);break;case"extraTime":h(e=>e+t.value)}G(e=>[...e,t])},[]),eq=()=>{let e=[{x:1,y:1}];if(eo.current=e,en.current="RIGHT",y.current=!1,S(e),k("RIGHT"),f){let t=eF(e);C(t);let l=t.find(e=>"apple"===e.type);l&&H(l.position);let s=t.find(e=>"blueFruit"===e.type);J((null==s?void 0:s.position)||null),T(eG(e,t))}else C([{position:{x:2,y:2},type:"apple"}]),H({x:2,y:2}),J(null),T(null);o(0),c(10+u),h(b+em),U(0),O(0),t("playing")},eR=(0,a.useCallback)(()=>{if("playing"!==e)return;let l=[...eo.current],s={...l[0]};switch(en.current){case"UP":s.y-=1;break;case"DOWN":s.y+=1;break;case"LEFT":s.x-=1;break;case"RIGHT":s.x+=1}if(s.x<0||s.x>=es||s.y<0||s.y>=er){t("gameOver");return}if(V&&"active"===V.state&&s.x===V.position.x&&s.y===V.position.y){c(e=>{let l=Math.floor(.25*e);return l<=0&&t("gameOver"),l}),T(null);return}if((l.length>1?l.slice(0,-1):l).some(e=>e.x===s.x&&e.y===s.y)){t("gameOver");return}l.unshift(s);let a=!1,r=[];L.forEach((e,l)=>{if(s.x===e.position.x&&s.y===e.position.y){r.push(l);let s=0,a=0;switch(e.type){case"apple":s=eu,a=-1;break;case"goldenApple":s=10*eu,a=-1,U(3);break;case"blueFruit":s=Math.floor(eu/2),a=1,h(e=>e+2)}let i=1;I>0&&"goldenApple"!==e.type&&(i=3,U(e=>e-1));let n=s*(1+R/100)*i,d=M?2*n:n;o(e=>e+Math.floor(d)),c(e=>{let l=Math.min(e+a,10+u);return l<=0&&t("gameOver"),l})}});let i=[...L];if(r.length>0&&(i=i.filter((e,t)=>!r.includes(t)),a=!0),a){let e=[];r.forEach(t=>{let s=L[t];if(s){if("apple"===s.type){let t=eO(l,[...i,...e],"apple");t&&e.push(t)}else if("goldenApple"===s.type){if(Math.random()<.01*E){let t=eO(l,[...i,...e],"goldenApple");t&&e.push(t)}}else if("blueFruit"===s.type&&K){let t=eO(l,[...i,...e],"blueFruit");t&&e.push(t)}}});let s=[...i,...e];C(s);let a=s.find(e=>"apple"===e.type);a&&H(a.position);let n=s.find(e=>"blueFruit"===e.type);if(J((null==n?void 0:n.position)||null),V&&"active"===V.state||T(eG(l,s)),l.length>=es*er){t("gameOver");return}}a||l.pop(),eo.current=l,S(l)},[L,V,e,eO,eG,es,er,eu,E,K,R,M,I]);(0,a.useEffect)(()=>{"gameOver"!==e||y.current||(r(e=>e+n),n>m&&x(n),y.current=!0)},[e,n,m]),(0,a.useEffect)(()=>{if("playing"!==e)return;let t=setInterval(eR,Math.max(100,500*(1-eg/100)));return()=>clearInterval(t)},[e,eR,eg]),(0,a.useEffect)(()=>{if("playing"!==e)return;let l=setInterval(()=>{h(e=>e<=1?(t("gameOver"),0):e-1),O(e=>e+1),T(e=>{if(e&&"active"===e.state){let t=e.timer-1;return t<=0?(eM(),null):{...e,timer:t}}return e})},1e3);return()=>clearInterval(l)},[e,eM]),(0,a.useEffect)(()=>{K&&"playing"===e&&!W?J(eP(N,z)):!K&&W&&J(null)},[K,e,W,N,z,eP]);let e_=(0,a.useCallback)(e=>{let t=[...eo.current];if(t.length<=2)return!1;let l={...t[0]};switch(e){case"UP":l.y-=1;break;case"DOWN":l.y+=1;break;case"LEFT":l.x-=1;break;case"RIGHT":l.x+=1}return(t.length>1?t.slice(1,-1):[]).some(e=>e.x===l.x&&e.y===l.y)},[]);(0,a.useEffect)(()=>{let t=t=>{if("playing"!==e)return;["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(t.key)&&t.preventDefault();let l=null;switch(t.key){case"ArrowUp":case"z":case"Z":l="UP";break;case"ArrowDown":case"s":case"S":l="DOWN";break;case"ArrowLeft":case"q":case"Q":l="LEFT";break;case"ArrowRight":case"d":case"D":l="RIGHT"}!l||"UP"===l&&"DOWN"===en.current||"DOWN"===l&&"UP"===en.current||"LEFT"===l&&"RIGHT"===en.current||"RIGHT"===l&&"LEFT"===en.current||e_(l)||(en.current=l,k(l))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,e_]);let eI=(e,t)=>{if(0===t)switch(w){case"UP":return"/Graphics/head_up.png";case"DOWN":return"/Graphics/head_down.png";case"LEFT":return"/Graphics/head_left.png";case"RIGHT":return"/Graphics/head_right.png"}else if(t===N.length-1){let l=N[t-1];if(l.x<e.x)return"/Graphics/tail_right.png";if(l.x>e.x)return"/Graphics/tail_left.png";if(l.y<e.y)return"/Graphics/tail_down.png";if(l.y>e.y)return"/Graphics/tail_up.png"}else{let l=N[t-1],s=N[t+1];if(l.x===s.x)return"/Graphics/body_vertical.png";if(l.y===s.y);else{if(l.x<e.x&&s.y<e.y||l.y<e.y&&s.x<e.x)return"/Graphics/body_topleft.png";if(l.x>e.x&&s.y<e.y||l.y<e.y&&s.x>e.x)return"/Graphics/body_topright.png";if(l.x<e.x&&s.y>e.y||l.y>e.y&&s.x<e.x)return"/Graphics/body_bottomleft.png";if(l.x>e.x&&s.y>e.y||l.y>e.y&&s.x>e.x)return"/Graphics/body_bottomright.png"}}return"/Graphics/body_horizontal.png"};return f?(0,s.jsxs)("div",{className:"flex flex-col items-center min-h-screen",children:[(0,s.jsxs)("div",{className:"w-full max-w-4xl mb-6",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-center mb-4",children:"Snake Idle"}),(0,s.jsx)("div",{className:"mb-4 text-center",children:Z?(0,s.jsxs)("div",{className:"bg-purple-900 bg-opacity-50 p-3 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex justify-center items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"text-purple-300 font-semibold",children:"Mode D\xe9veloppeur Activ\xe9"}),(0,s.jsx)("button",{onClick:eD,className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 transition-colors text-sm",children:"D\xe9sactiver"})]}),(0,s.jsxs)("div",{className:"flex justify-center items-center gap-2",children:[(0,s.jsx)("input",{type:"number",value:ee,onChange:e=>et(e.target.value),placeholder:"Nombre de points",className:"px-3 py-1 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none w-32",onKeyPress:e=>"Enter"===e.key&&eB()}),(0,s.jsx)("button",{onClick:eB,className:"px-4 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"Ajouter Points"})]})]}):(0,s.jsxs)("div",{className:"flex justify-center items-center gap-2",children:[(0,s.jsx)("input",{type:"password",value:Y,onChange:e=>$(e.target.value),placeholder:"Mot de passe dev",className:"px-3 py-1 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none",onKeyPress:e=>"Enter"===e.key&&eD()}),(0,s.jsx)("button",{onClick:eD,className:"px-4 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 transition-colors",children:"Activer Mode Dev"})]})}),(0,s.jsx)("div",{className:"flex justify-center mb-6",children:(0,s.jsxs)("div",{className:"bg-gray-800 p-1 rounded-lg",children:[(0,s.jsx)("button",{onClick:()=>ec("game"),className:"px-6 py-2 rounded-md font-semibold transition-colors ".concat("game"===ed?"bg-green-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"),children:"\uD83C\uDFAE JEU"}),(0,s.jsx)("button",{onClick:()=>ec("upgrades"),className:"px-6 py-2 rounded-md font-semibold transition-colors ml-2 ".concat("upgrades"===ed?"bg-purple-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"),children:"\uD83D\uDE80 AM\xc9LIORATIONS"})]})}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("div",{className:"grid grid-cols-6 gap-4 mb-4",children:[(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"PV"}),(0,s.jsxs)("div",{className:"text-2xl font-bold ".concat(d<=5?"text-red-500":d<=10?"text-yellow-400":"text-red-400"),children:["❤️ ",d]})]}),(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Points actuels"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-green-400",children:n})]}),(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Total accumul\xe9"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-yellow-400",children:l})]}),(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Meilleur score"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-purple-400",children:m})]}),(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg ".concat(g<=10?"border-2 border-red-500":""),children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Temps restant"}),(0,s.jsxs)("div",{className:"text-2xl font-bold ".concat(g<=10?"text-red-400":"text-blue-400"),children:[g,"s"]})]}),(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Valeur pomme"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-red-400",children:["+",eu]})]}),(M||R>0||I>0)&&(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Bonus actifs"}),(0,s.jsxs)("div",{className:"text-lg font-bold text-green-400",children:[M&&"2x ",R>0&&"+".concat(R.toFixed(1),"% "),I>0&&(0,s.jsxs)("span",{className:"text-yellow-400",children:["\uD83C\uDF1F x3 (",I," rest.)"]})]})]}),D>0&&"playing"===e&&F<5&&(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg ".concat(F>=3?"border-2 border-orange-500 animate-pulse":""),children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:F>=3?"⚠️ Bombes imminentes":"Bombes dans"}),(0,s.jsxs)("div",{className:"text-2xl font-bold ".concat(F>=3?"text-orange-400":"text-yellow-400"),children:[5-F,"s"]})]})]})})]}),"game"===ed&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"relative bg-gray-800 p-4 rounded-lg shadow-2xl",children:[(0,s.jsxs)("div",{className:"relative grid bg-gray-700 border-4 border-gray-600",style:{gridTemplateColumns:"repeat(".concat(es,", ").concat(80,"px)"),gridTemplateRows:"repeat(".concat(er,", ").concat(80,"px)")},children:[Array.from({length:es*er}).map((e,t)=>(0,s.jsx)("div",{className:"border border-gray-600 bg-gray-750"},"cell-".concat(t))),L.map((e,t)=>(0,s.jsxs)("div",{className:"absolute flex items-center justify-center",style:{left:"".concat(80*e.position.x,"px"),top:"".concat(80*e.position.y,"px"),width:"".concat(80,"px"),height:"".concat(80,"px")},children:["apple"===e.type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:"/Graphics/apple.png",alt:"Food",className:"w-12 h-12 opacity-90",onError:e=>{console.error("Error loading apple.png"),e.currentTarget.style.display="none"}}),(0,s.jsx)("div",{className:"w-8 h-8 bg-red-500 rounded-full",style:{display:"none"},id:"apple-fallback"})]}),"goldenApple"===e.type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("img",{src:"/Graphics/golden_apple.png",alt:"Pomme d'or",className:"w-12 h-12 opacity-90",style:{filter:"brightness(1.2) contrast(1.1) drop-shadow(0 0 4px rgba(255, 215, 0, 0.6))"},onError:e=>{console.error("Error loading golden_apple.png"),e.currentTarget.style.display="none"}}),(0,s.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center",children:[(0,s.jsx)("span",{className:"text-yellow-300 text-xs font-bold",children:"10x"}),(0,s.jsx)("div",{className:"absolute -top-1 -right-1 bg-green-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center font-bold",children:"3x"})]})]}),(0,s.jsx)("div",{className:"w-8 h-8 bg-yellow-400 rounded-full",style:{display:"none"},id:"golden-apple-fallback"})]}),"blueFruit"===e.type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:"/Graphics/blue_apple.png",alt:"Blue Fruit",className:"w-12 h-12 opacity-90",onError:e=>{console.error("Error loading blue_apple.png"),e.currentTarget.style.display="none"}}),(0,s.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full",style:{display:"none"},id:"blue-fruit-fallback"})]})]},"food-".concat(t))),V&&"active"===V.state&&(0,s.jsx)("div",{className:"absolute flex items-center justify-center",style:{left:"".concat(80*V.position.x,"px"),top:"".concat(80*V.position.y,"px"),width:"".concat(80,"px"),height:"".concat(80,"px")},children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center font-bold text-white ".concat(V.timer<=3?"bg-red-600 animate-pulse":"bg-gray-700"),children:"\uD83D\uDCA3"}),(0,s.jsx)("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold",children:V.timer}),V.timer<=3&&(0,s.jsx)("div",{className:"absolute inset-0 rounded-full border-2 border-red-400 animate-ping"})]})}),N.map((e,t)=>(0,s.jsx)("div",{className:"absolute flex items-center justify-center",style:{left:"".concat(80*e.x,"px"),top:"".concat(80*e.y,"px"),width:"".concat(80,"px"),height:"".concat(80,"px")},children:(0,s.jsx)("img",{src:eI(e,t),alt:"Snake segment ".concat(t),className:"w-16 h-16"})},"snake-".concat(t)))]}),"gameOver"===e&&(0,s.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-75 flex items-center justify-center rounded-lg",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold mb-2 text-red-400",children:0===g?"Temps \xe9coul\xe9!":n===es*er-1?"Parfait! Tableau rempli!":"Game Over!"}),(0,s.jsxs)("p",{className:"text-lg mb-4",children:["Score: ",n]}),(0,s.jsxs)("p",{className:"text-sm text-gray-300 mb-4",children:["+",n," points ajout\xe9s au total!"]}),0===g&&(0,s.jsx)("p",{className:"text-sm text-blue-300 mb-4",children:"⏰ Les 30 secondes sont termin\xe9es"}),n===es*er-1&&(0,s.jsx)("p",{className:"text-sm text-green-300 mb-4",children:"\uD83C\uDF89 Vous avez rempli tout le tableau!"})]})})]})}),"upgrades"===ed&&(0,s.jsx)(i,{upgrades:ej,totalPoints:l,currentPoints:n,appleValue:eu,gridWidth:es,gridHeight:er,timeBonus:em,speedBonus:eg,blueFruitBonus:eb,goldenAppleLevel:E,bombSystemLevel:D,onBuyUpgrade:eL,onPlayGame:()=>{ec("game"),("idle"===e||"gameOver"===e)&&eq()},gameState:e,saveUpgrades:eC,loadUpgrades:eE,applySavedUpgrades:eA,savedUpgrades:ey,healthBonus:u}),"game"===ed&&(0,s.jsxs)("div",{className:"mt-6 text-center",children:["idle"===e&&(0,s.jsx)("button",{onClick:eq,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg text-lg transition-colors",children:"Commencer \xe0 jouer"}),"gameOver"===e&&(0,s.jsx)("button",{onClick:eq,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg text-lg transition-colors",children:"Rejouer"}),"playing"===e&&(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Utilisez les fl\xe8ches ou Z/Q/S/D pour contr\xf4ler le snake"})]}),"game"===ed&&(0,s.jsxs)("div",{className:"mt-6 text-center text-sm text-gray-500 max-w-md",children:[(0,s.jsxs)("p",{className:"mb-2",children:["\uD83C\uDFAE ",(0,s.jsx)("strong",{children:"Objectif:"})," Ramassez les pommes pour gagner des points"]}),(0,s.jsxs)("p",{className:"mb-2",children:["\uD83C\uDF4E ",(0,s.jsx)("strong",{children:"Points:"})," Chaque pomme vaut ",eu," point",eu>1?"s":""]}),(0,s.jsxs)("p",{className:"mb-2",children:["⏰ ",(0,s.jsx)("strong",{children:"Temps:"})," Vous avez 30 secondes par partie!"]}),(0,s.jsxs)("p",{className:"mb-2",children:["\uD83D\uDC8E ",(0,s.jsx)("strong",{children:"Idle:"})," Vos points sont conserv\xe9s m\xeame apr\xe8s la mort!"]}),(0,s.jsxs)("p",{children:["\uD83D\uDE80 ",(0,s.jsx)("strong",{children:"Am\xe9liorations:"})," Utilisez vos points pour d\xe9bloquer des bonus permanents!"]}),(0,s.jsxs)("p",{className:"mb-2",children:["⭐ ",(0,s.jsx)("strong",{children:"Pomme d'Or:"})," Accorde un bonus x3 sur les 3 prochaines pommes mang\xe9es!"]})]})]}):(0,s.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold mb-4",children:"Snake Idle"}),(0,s.jsx)("div",{className:"text-gray-400",children:"Chargement du jeu..."})]})})}function i(e){let{upgrades:t,totalPoints:l,currentPoints:a,appleValue:r,gridWidth:i,gridHeight:n,timeBonus:o,speedBonus:d,blueFruitBonus:c,goldenAppleLevel:u,bombSystemLevel:p,onBuyUpgrade:m,onPlayGame:x,gameState:g,saveUpgrades:h,loadUpgrades:b,applySavedUpgrades:v,savedUpgrades:y,healthBonus:f}=e,j=(e,t)=>Math.floor(e*Math.pow(1.5,t)),N=()=>l;return(0,s.jsx)("div",{className:"w-full max-w-4xl mx-auto",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8 shadow-2xl",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-center mb-8 text-purple-400",children:"Arbre d'Am\xe9liorations"}),(0,s.jsx)("div",{className:"space-y-4 mb-16",children:t.map(e=>{var l;let a=j(e.baseCost,e.level),x=N()>=a,g=e.level>=e.maxLevel;return(0,s.jsx)("div",{className:"p-4 rounded-lg border-2 transition-all cursor-pointer ".concat(e.unlocked?g?"bg-purple-900 border-purple-600":x?"bg-gray-800 border-green-600 hover:bg-gray-750":"bg-gray-800 border-gray-700 opacity-75":"bg-gray-900 border-gray-700 opacity-50"),onClick:()=>e.unlocked&&!g&&x&&m(e.id),children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("div",{className:"text-lg font-bold text-gray-300",children:"appleValue"===e.id?"POMMES":"healthBonus"===e.id?"PV":"gridSize"===e.id?"GRILLE":"timeBonus"===e.id?"TEMPS":"speedBonus"===e.id?"VITESSE":"blueFruit"===e.id?"BLEU":"goldenApple"===e.id?"OR":"bombSystem"===e.id?"BOMBE":"BONUS"}),(0,s.jsx)("h3",{className:"font-bold text-white",children:e.name}),(0,s.jsxs)("div",{className:"text-sm text-gray-400",children:["Niv. ",e.level,"/",e.maxLevel]})]}),(0,s.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:e.description}),!e.unlocked&&(0,s.jsxs)("div",{className:"text-sm text-yellow-400",children:["\uD83D\uDD12 Verrouill\xe9 - N\xe9cessite Niv.",e.requiredLevelValue," en"," ",null===(l=t.find(t=>t.id===e.requiredLevel))||void 0===l?void 0:l.name]}),(0,s.jsx)("div",{className:"flex items-center gap-4 mt-2",children:(0,s.jsxs)("div",{className:"text-sm font-semibold text-gray-300",children:["Actuellement:","appleValue"===e.id&&" +".concat(r," points/pomme"),"healthBonus"===e.id&&" ".concat(10+f," PV de d\xe9part"),"gridSize"===e.id&&" ".concat(i,"x").concat(n),"timeBonus"===e.id&&" +".concat(o,"s par partie"),"speedBonus"===e.id&&" ".concat(d,"% de vitesse"),"blueFruit"===e.id&&(c>0?" +".concat(c," PV, 0.5x points, +2s chrono/pomme"):" Pas poss\xe9d\xe9"),"goldenApple"===e.id&&(u>0?" ".concat(u,"% chance, valeur 10x"):" Non d\xe9bloqu\xe9"),"bombSystem"===e.id&&(p>0?" Niv.".concat(p,", temps: ").concat(15-p,"s"):" Non d\xe9bloqu\xe9")]})})]}),(0,s.jsxs)("div",{className:"flex flex-col items-end ml-4",children:[e.unlocked&&!g&&(0,s.jsx)("div",{className:"text-lg font-bold",children:x?(0,s.jsxs)("span",{className:"text-green-400",children:[a," pts"]}):(0,s.jsxs)("span",{className:"text-red-400",children:[a," pts"]})}),g&&(0,s.jsx)("div",{className:"text-lg font-bold text-purple-400",children:"MAX"}),!e.unlocked&&(0,s.jsx)("div",{className:"text-lg font-bold text-yellow-400",children:"\uD83D\uDD12"})]})]})},e.id)})}),(0,s.jsxs)("div",{className:"border-t border-gray-700 pt-6",children:[(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("button",{onClick:x,className:"px-8 py-3 rounded-lg font-bold text-lg transition-colors ".concat("idle"===g||"gameOver"===g?"bg-green-600 hover:bg-green-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"),children:"idle"===g?"\uD83C\uDFAE Commencer \xe0 jouer":"gameOver"===g?"\uD83D\uDD04 Rejouer":"\uD83C\uDFAE Retourner au jeu"})}),(0,s.jsxs)("div",{className:"mt-6 grid grid-cols-3 gap-4 text-center",children:[(0,s.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Valeur des pommes"}),(0,s.jsxs)("div",{className:"text-xl font-bold text-red-400",children:["+",r]})]}),(0,s.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Bonus temps"}),(0,s.jsxs)("div",{className:"text-xl font-bold text-yellow-400",children:["+",o,"s"]})]}),(0,s.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Taille de la grille"}),(0,s.jsxs)("div",{className:"text-xl font-bold text-blue-400",children:[i,"x",n]})]})]})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[130,215,744],()=>t(2210)),_N_E=e.O()}]);