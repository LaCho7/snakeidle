module.exports=[16474,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d(){let[a,d]=(0,c.useState)("idle"),[f,g]=(0,c.useState)(0),[h,i]=(0,c.useState)(0),[j,k]=(0,c.useState)(10),[l,m]=(0,c.useState)(0),[n,o]=(0,c.useState)(0),[p,q]=(0,c.useState)(30),[r,s]=(0,c.useState)(30),t=(0,c.useRef)(!1),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)([{x:1,y:1}]),[y,z]=(0,c.useState)("RIGHT"),[A,B]=(0,c.useState)({x:2,y:2}),C=a=>{let b=Math.floor(a/2);return{width:4+b,height:4+b+a%2}},[D,E]=(0,c.useState)(4),[F,G]=(0,c.useState)(4),H=(0,c.useRef)("RIGHT"),I=(0,c.useRef)([{x:1,y:1}]);(0,c.useEffect)(()=>{I.current=w},[w]),(0,c.useEffect)(()=>{H.current=y},[y]);let[J,K]=(0,c.useState)("game"),[L,M]=(0,c.useState)(1),[N,O]=(0,c.useState)(0),[P,Q]=(0,c.useState)([]),[R,S]=(0,c.useState)([{id:"appleValue",name:"Valeur des Pommes",description:"Augmente la valeur de chaque pomme rÃ©coltÃ©e",baseCost:10,level:0,maxLevel:20,unlocked:!0,position:{x:1,y:1},effect:()=>{}},{id:"healthBonus",name:"Points de Vie",description:"Augmente les PV de dÃ©part du serpent",baseCost:10,level:0,maxLevel:20,unlocked:!0,position:{x:1,y:3},effect:()=>{}},{id:"timeBonus",name:"Bonus Temps",description:"+2 secondes par partie",baseCost:50,level:0,maxLevel:10,unlocked:!1,requiredLevel:"appleValue",requiredLevelValue:3,position:{x:-1,y:1},effect:()=>{}},{id:"gridSize",name:"Taille de la Grille",description:"Agrandit le terrain de jeu",baseCost:25,level:0,maxLevel:6,unlocked:!1,requiredLevel:"appleValue",requiredLevelValue:3,position:{x:3,y:1},effect:()=>{}}]);(0,c.useEffect)(()=>{v(!0),B(Z([{x:1,y:1}])||{x:2,y:2})},[]);let T=(0,c.useCallback)(a=>a.map(b=>{if(!b.unlocked&&b.requiredLevel&&b.requiredLevelValue){let c=a.find(a=>a.id===b.requiredLevel);if(c&&c.level>=b.requiredLevelValue)return{...b,unlocked:!0}}return b}),[]),U=(0,c.useCallback)((a,b)=>Math.floor(a*Math.pow(1.5,b)),[]),V=(0,c.useCallback)(b=>{S(c=>{let e=c.find(a=>a.id===b);return!e||e.level>=e.maxLevel||!e.unlocked||f<U(e.baseCost,e.level)?c:T(c.map(c=>{if(c.id===b){let e=c.level+1;if("appleValue"===b)M(1+e);else if("healthBonus"===b)m(e);else if("gridSize"===b){let b=C(e);E(b.width),G(b.height),"playing"===a&&(d("idle"),K("game"))}else"timeBonus"===b&&O(2*e);return{...c,level:e}}return c}))});let c=R.find(a=>a.id===b);if(c){let a=U(c.baseCost,c.level);g(b=>Math.max(0,b-a))}},[f,U,a,T]),W=(0,c.useCallback)(()=>{let a=R.map(a=>({id:a.id,name:a.name,description:a.description,baseCost:a.baseCost,level:a.level,maxLevel:a.maxLevel,unlocked:a.unlocked,requiredLevel:a.requiredLevel,requiredLevelValue:a.requiredLevelValue,position:a.position,effect:()=>{}}));Q(a);let b=new Blob([JSON.stringify({savedUpgrades:a,gameState:{appleValue:L,healthBonus:l,timeBonus:N,gridWidth:D,gridHeight:F,totalPoints:f,highScore:n},timestamp:new Date().toISOString()},null,2)],{type:"application/json"}),c=URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download=`snake_idle_upgrades_${Date.now()}.json`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(c)},[R,L,N,D,F,f,n]),X=(0,c.useCallback)(a=>{let b=a.target.files?.[0];if(!b)return;let c=new FileReader;c.onload=a=>{try{let b=JSON.parse(a.target?.result);b.savedUpgrades&&Array.isArray(b.savedUpgrades)&&(Q(b.savedUpgrades),b.gameState&&(M(b.gameState.appleValue||1),m(b.gameState.healthBonus||0),O(b.gameState.timeBonus||0),E(b.gameState.gridWidth||4),G(b.gameState.gridHeight||4),o(b.gameState.highScore||0)))}catch(a){console.error("Erreur lors du chargement des amÃ©liorations:",a),alert("Erreur: Le fichier de sauvegarde est invalide")}},c.readAsText(b)},[]),Y=(0,c.useCallback)(()=>{0===P.length?alert("Aucune amÃ©lioration sauvegardÃ©e Ã  appliquer"):(M(1),m(0),O(0),E(4),G(4),S(R.map(a=>{let b=P.find(b=>b.id===a.id);if(b){let c=b.level-a.level;if("appleValue"===a.id)M(a=>a+c);else if("healthBonus"===a.id)m(a=>a+c);else if("timeBonus"===a.id)O(a=>a+2*b.level);else if("gridSize"===a.id){let a=C(b.level);E(a.width),G(a.height)}return b}return a})),Q([]),alert("AmÃ©liorations appliquÃ©es avec succÃ¨s!"))},[P,R]),Z=(0,c.useCallback)(a=>{let b=[];for(let c=0;c<D;c++)for(let d=0;d<F;d++)a.some(a=>a.x===c&&a.y===d)||b.push({x:c,y:d});if(0===b.length)return null;let c=Math.floor(Math.random()*b.length);return b[c]},[D,F]),$=()=>{let a=[{x:1,y:1}];I.current=a,H.current="RIGHT",t.current=!1,x(a),z("RIGHT"),B((u?Z(a):{x:2,y:2})||{x:2,y:2}),i(0),k(10+l),q(r+N),d("playing")},_=(0,c.useCallback)(()=>{if("playing"!==a)return;let b=[...I.current],c={...b[0]};switch(H.current){case"UP":c.y-=1;break;case"DOWN":c.y+=1;break;case"LEFT":c.x-=1;break;case"RIGHT":c.x+=1}if(c.x<0||c.x>=D||c.y<0||c.y>=F||(b.length>1?b.slice(0,-1):b).some(a=>a.x===c.x&&a.y===c.y))return void d("gameOver");if(b.unshift(c),c.x===A.x&&c.y===A.y){i(a=>a+L),k(a=>{let b=a-1;return b<=0&&d("gameOver"),b});let a=Z(b);if(null===a)return void d("gameOver");B(a)}else b.pop();I.current=b,x(b)},[A,a,Z,D,F,L]);(0,c.useEffect)(()=>{"gameOver"!==a||t.current||(g(a=>a+h),h>n&&o(h),t.current=!0)},[a,h,n]),(0,c.useEffect)(()=>{if("playing"!==a)return;let b=setInterval(_,500);return()=>clearInterval(b)},[a,_]),(0,c.useEffect)(()=>{if("playing"!==a)return;let b=setInterval(()=>{q(a=>a<=1?(d("gameOver"),0):a-1)},1e3);return()=>clearInterval(b)},[a]);let aa=(0,c.useCallback)(a=>{let b=[...I.current];if(b.length<=2)return!1;let c={...b[0]};switch(a){case"UP":c.y-=1;break;case"DOWN":c.y+=1;break;case"LEFT":c.x-=1;break;case"RIGHT":c.x+=1}return(b.length>1?b.slice(1,-1):[]).some(a=>a.x===c.x&&a.y===c.y)},[]);return((0,c.useEffect)(()=>{let b=b=>{if("playing"!==a)return;["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(b.key)&&b.preventDefault();let c=null;switch(b.key){case"ArrowUp":case"z":case"Z":c="UP";break;case"ArrowDown":case"s":case"S":c="DOWN";break;case"ArrowLeft":case"q":case"Q":c="LEFT";break;case"ArrowRight":case"d":case"D":c="RIGHT"}c&&("UP"===c&&"DOWN"===H.current||"DOWN"===c&&"UP"===H.current||"LEFT"===c&&"RIGHT"===H.current||"RIGHT"===c&&"LEFT"===H.current||aa(c)||(H.current=c,z(c)))};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[a,aa]),u)?(0,b.jsxs)("div",{className:"flex flex-col items-center min-h-screen",children:[(0,b.jsxs)("div",{className:"w-full max-w-4xl mb-6",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-center mb-4",children:"Snake Idle"}),(0,b.jsx)("div",{className:"flex justify-center mb-6",children:(0,b.jsxs)("div",{className:"bg-gray-800 p-1 rounded-lg",children:[(0,b.jsx)("button",{onClick:()=>K("game"),className:`px-6 py-2 rounded-md font-semibold transition-colors ${"game"===J?"bg-green-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:"ðŸŽ® JEU"}),(0,b.jsx)("button",{onClick:()=>K("upgrades"),className:`px-6 py-2 rounded-md font-semibold transition-colors ml-2 ${"upgrades"===J?"bg-purple-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:"ðŸš€ AMÃ‰LIORATIONS"})]})}),(0,b.jsx)("div",{className:"text-center",children:(0,b.jsxs)("div",{className:"grid grid-cols-6 gap-4 mb-4",children:[(0,b.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg",children:[(0,b.jsx)("div",{className:"text-sm text-gray-400",children:"PV"}),(0,b.jsxs)("div",{className:`text-2xl font-bold ${j<=5?"text-red-500":j<=10?"text-yellow-400":"text-red-400"}`,children:["â¤ï¸ ",j]})]}),(0,b.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg",children:[(0,b.jsx)("div",{className:"text-sm text-gray-400",children:"Points actuels"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-green-400",children:h})]}),(0,b.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg",children:[(0,b.jsx)("div",{className:"text-sm text-gray-400",children:"Total accumulÃ©"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-yellow-400",children:f})]}),(0,b.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg",children:[(0,b.jsx)("div",{className:"text-sm text-gray-400",children:"Meilleur score"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-purple-400",children:n})]}),(0,b.jsxs)("div",{className:`bg-gray-800 p-4 rounded-lg ${p<=10?"border-2 border-red-500":""}`,children:[(0,b.jsx)("div",{className:"text-sm text-gray-400",children:"Temps restant"}),(0,b.jsxs)("div",{className:`text-2xl font-bold ${p<=10?"text-red-400":"text-blue-400"}`,children:[p,"s"]})]}),(0,b.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg",children:[(0,b.jsx)("div",{className:"text-sm text-gray-400",children:"Valeur pomme"}),(0,b.jsxs)("div",{className:"text-2xl font-bold text-red-400",children:["+",L]})]})]})})]}),"game"===J&&(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"relative bg-gray-800 p-4 rounded-lg shadow-2xl",children:[(0,b.jsxs)("div",{className:"relative grid bg-gray-700 border-4 border-gray-600",style:{gridTemplateColumns:`repeat(${D}, 80px)`,gridTemplateRows:`repeat(${F}, 80px)`},children:[Array.from({length:D*F}).map((a,c)=>(0,b.jsx)("div",{className:"border border-gray-600 bg-gray-750"},`cell-${c}`)),(0,b.jsxs)("div",{className:"absolute flex items-center justify-center",style:{left:`${80*A.x}px`,top:`${80*A.y}px`,width:"80px",height:"80px"},children:[(0,b.jsx)("img",{src:"/Graphics/apple.png",alt:"Food",className:"w-12 h-12",onError:a=>{console.error("Error loading apple.png"),a.currentTarget.style.display="none"}}),(0,b.jsx)("div",{className:"w-8 h-8 bg-red-500 rounded-full",style:{display:"none"},id:"apple-fallback"})]}),w.map((a,c)=>(0,b.jsx)("div",{className:"absolute flex items-center justify-center",style:{left:`${80*a.x}px`,top:`${80*a.y}px`,width:"80px",height:"80px"},children:(0,b.jsx)("img",{src:((a,b)=>{if(0===b)switch(y){case"UP":return"/Graphics/head_up.png";case"DOWN":return"/Graphics/head_down.png";case"LEFT":return"/Graphics/head_left.png";case"RIGHT":return"/Graphics/head_right.png"}else if(b===w.length-1){let c=w[b-1];if(c.x<a.x)return"/Graphics/tail_right.png";if(c.x>a.x)return"/Graphics/tail_left.png";if(c.y<a.y)return"/Graphics/tail_down.png";if(c.y>a.y)return"/Graphics/tail_up.png"}else{let c=w[b-1],d=w[b+1];if(c.x===d.x)return"/Graphics/body_vertical.png";if(c.y===d.y)return"/Graphics/body_horizontal.png";if(c.x<a.x&&d.y<a.y||c.y<a.y&&d.x<a.x)return"/Graphics/body_topleft.png";if(c.x>a.x&&d.y<a.y||c.y<a.y&&d.x>a.x)return"/Graphics/body_topright.png";if(c.x<a.x&&d.y>a.y||c.y>a.y&&d.x<a.x)return"/Graphics/body_bottomleft.png";if(c.x>a.x&&d.y>a.y||c.y>a.y&&d.x>a.x)return"/Graphics/body_bottomright.png"}return"/Graphics/body_horizontal.png"})(a,c),alt:`Snake segment ${c}`,className:"w-16 h-16"})},`snake-${c}`))]}),"gameOver"===a&&(0,b.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-75 flex items-center justify-center rounded-lg",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h2",{className:"text-3xl font-bold mb-2 text-red-400",children:0===p?"Temps Ã©coulÃ©!":h===D*F-1?"Parfait! Tableau rempli!":"Game Over!"}),(0,b.jsxs)("p",{className:"text-lg mb-4",children:["Score: ",h]}),(0,b.jsxs)("p",{className:"text-sm text-gray-300 mb-4",children:["+",h," points ajoutÃ©s au total!"]}),0===p&&(0,b.jsx)("p",{className:"text-sm text-blue-300 mb-4",children:"â° Les 30 secondes sont terminÃ©es"}),h===D*F-1&&(0,b.jsx)("p",{className:"text-sm text-green-300 mb-4",children:"ðŸŽ‰ Vous avez rempli tout le tableau!"})]})})]})}),"upgrades"===J&&(0,b.jsx)(e,{upgrades:R,totalPoints:f,currentPoints:h,appleValue:L,gridWidth:D,gridHeight:F,timeBonus:N,onBuyUpgrade:V,onPlayGame:()=>{K("game"),("idle"===a||"gameOver"===a)&&$()},gameState:a,saveUpgrades:W,loadUpgrades:X,applySavedUpgrades:Y,savedUpgrades:P,healthBonus:l}),"game"===J&&(0,b.jsxs)("div",{className:"mt-6 text-center",children:["idle"===a&&(0,b.jsx)("button",{onClick:$,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg text-lg transition-colors",children:"Commencer Ã  jouer"}),"gameOver"===a&&(0,b.jsx)("button",{onClick:$,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg text-lg transition-colors",children:"Rejouer"}),"playing"===a&&(0,b.jsx)("div",{className:"text-sm text-gray-400",children:"Utilisez les flÃ¨ches ou Z/Q/S/D pour contrÃ´ler le snake"})]}),"game"===J&&(0,b.jsxs)("div",{className:"mt-6 text-center text-sm text-gray-500 max-w-md",children:[(0,b.jsxs)("p",{className:"mb-2",children:["ðŸŽ® ",(0,b.jsx)("strong",{children:"Objectif:"})," Ramassez les pommes pour gagner des points"]}),(0,b.jsxs)("p",{className:"mb-2",children:["ðŸŽ ",(0,b.jsx)("strong",{children:"Points:"})," Chaque pomme vaut ",L," point",L>1?"s":""]}),(0,b.jsxs)("p",{className:"mb-2",children:["â° ",(0,b.jsx)("strong",{children:"Temps:"})," Vous avez 30 secondes par partie!"]}),(0,b.jsxs)("p",{className:"mb-2",children:["ðŸ’Ž ",(0,b.jsx)("strong",{children:"Idle:"})," Vos points sont conservÃ©s mÃªme aprÃ¨s la mort!"]}),(0,b.jsxs)("p",{children:["ðŸš€ ",(0,b.jsx)("strong",{children:"AmÃ©liorations:"})," Utilisez vos points pour dÃ©bloquer des bonus permanents!"]})]})]}):(0,b.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold mb-4",children:"Snake Idle"}),(0,b.jsx)("div",{className:"text-gray-400",children:"Chargement du jeu..."})]})})}function e({upgrades:a,totalPoints:c,currentPoints:d,appleValue:e,gridWidth:f,gridHeight:g,timeBonus:h,onBuyUpgrade:i,onPlayGame:j,gameState:k,saveUpgrades:l,loadUpgrades:m,applySavedUpgrades:n,savedUpgrades:o,healthBonus:p}){return(0,b.jsx)("div",{className:"w-full max-w-4xl mx-auto",children:(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8 shadow-2xl",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-center mb-8 text-purple-400",children:"Arbre d'AmÃ©liorations"}),(0,b.jsx)("div",{className:"space-y-4 mb-16",children:a.map(d=>{let j=Math.floor(d.baseCost*Math.pow(1.5,d.level)),k=c>=j,l=d.level>=d.maxLevel;return(0,b.jsx)("div",{className:`p-4 rounded-lg border-2 transition-all cursor-pointer ${!d.unlocked?"bg-gray-900 border-gray-700 opacity-50":l?"bg-purple-900 border-purple-600":k?"bg-gray-800 border-green-600 hover:bg-gray-750":"bg-gray-800 border-gray-700 opacity-75"}`,onClick:()=>d.unlocked&&!l&&k&&i(d.id),children:(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("div",{className:"text-lg font-bold text-gray-300",children:"appleValue"===d.id?"POMMES":"healthBonus"===d.id?"PV":"gridSize"===d.id?"GRILLE":"timeBonus"===d.id?"TEMPS":"BONUS"}),(0,b.jsx)("h3",{className:"font-bold text-white",children:d.name}),(0,b.jsxs)("div",{className:"text-sm text-gray-400",children:["Niv. ",d.level,"/",d.maxLevel]})]}),(0,b.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:d.description}),!d.unlocked&&(0,b.jsxs)("div",{className:"text-sm text-yellow-400",children:["ðŸ”’ VerrouillÃ© - NÃ©cessite Niv.",d.requiredLevelValue," en"," ",a.find(a=>a.id===d.requiredLevel)?.name]}),(0,b.jsx)("div",{className:"flex items-center gap-4 mt-2",children:(0,b.jsxs)("div",{className:"text-sm font-semibold text-gray-300",children:["Actuellement:","appleValue"===d.id&&` +${e} points/pomme`,"healthBonus"===d.id&&` ${10+p} PV de d\xe9part`,"gridSize"===d.id&&` ${f}x${g}`,"timeBonus"===d.id&&` +${h}s par partie`]})})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end ml-4",children:[d.unlocked&&!l&&(0,b.jsx)("div",{className:"text-lg font-bold",children:k?(0,b.jsxs)("span",{className:"text-green-400",children:[j," pts"]}):(0,b.jsxs)("span",{className:"text-red-400",children:[j," pts"]})}),l&&(0,b.jsx)("div",{className:"text-lg font-bold text-purple-400",children:"MAX"}),!d.unlocked&&(0,b.jsx)("div",{className:"text-lg font-bold text-yellow-400",children:"ðŸ”’"})]})]})},d.id)})}),(0,b.jsxs)("div",{className:"border-t border-gray-700 pt-6",children:[(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)("button",{onClick:j,className:`px-8 py-3 rounded-lg font-bold text-lg transition-colors ${"idle"===k||"gameOver"===k?"bg-green-600 hover:bg-green-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:"idle"===k?"ðŸŽ® Commencer Ã  jouer":"gameOver"===k?"ðŸ”„ Rejouer":"ðŸŽ® Retourner au jeu"})}),(0,b.jsxs)("div",{className:"mt-6 grid grid-cols-3 gap-4 text-center",children:[(0,b.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,b.jsx)("div",{className:"text-sm text-gray-400",children:"Valeur des pommes"}),(0,b.jsxs)("div",{className:"text-xl font-bold text-red-400",children:["+",e]})]}),(0,b.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,b.jsx)("div",{className:"text-sm text-gray-400",children:"Bonus temps"}),(0,b.jsxs)("div",{className:"text-xl font-bold text-yellow-400",children:["+",h,"s"]})]}),(0,b.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,b.jsx)("div",{className:"text-sm text-gray-400",children:"Taille de la grille"}),(0,b.jsxs)("div",{className:"text-xl font-bold text-blue-400",children:[f,"x",g]})]})]})]})]})})}a.s(["default",()=>d])}];

//# sourceMappingURL=src_components_SnakeGame_tsx_6a1f3fa0._.js.map